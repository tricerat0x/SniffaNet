<!-- scan_devices.html -->
<form id="scanForm">
  <label for="ipAddress">Enter IP Address:</label>
  <input type="text" id="ipAddress" name="ip_address">
  <button type="submit" id="scanButton">Scan</button>
</form>

<script>
document.getElementById('scanForm').addEventListener('submit', function(event) {
  event.preventDefault();  // Prevent form submission
  var ipAddress = document.getElementById('ipAddress').value;
  
  // Make an AJAX request to the scan_devices view
  var xhr = new XMLHttpRequest();
  xhr.open('POST', '/scan-devices/', true);
  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  xhr.onload = function() {
    if (xhr.status >= 200 && xhr.status < 400) {
      var response = JSON.parse(xhr.responseText);
      console.log(response);
      // Handle response here, e.g., display scan results
    } else {
      console.error('Request failed with status:', xhr.status);
    }
  };
  xhr.onerror = function() {
    console.error('Request failed');
  };
  xhr.send('ip_address=' + encodeURIComponent(ipAddress));
});
</script>
